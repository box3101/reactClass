<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- swiper css -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Orbitron:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../css/ex3.css">
  <script src="https://kit.fontawesome.com/8c61d70daf.js" crossorigin="anonymous"></script>

  <script src="../js/ex2.js"></script>

  <title>Document</title>
</head>

<body>
  <main class="bg1">
    <ul>
      <li class="on">
        <a href="#">DESIGNER</a>
      </li>
      <li>
        <a href="#">DEVELOPER</a>
      </li>

      <article class="on">
        <h1>DESIGNER</h1>
        <p><span>Lorem ipsum dolor sit amet consectetur.</span></p><br>
        <p><span>Lorem ipsum dolor sit.</span></p>
      </article>

      <article>
        <h1>DEVELOPER</h1>
        <p><span>Lorem ipsum dolor sit amet consectetur.</span></p><br>
        <p><span>Lorem ipsum dolor sit.</span></p>
      </article>

    </ul>
  </main>

  <script>
    const main = document.querySelector("main");
    const btns = document.querySelectorAll("ul li");
    const boxs = main.querySelectorAll('article');

    //box 반복
    boxs.forEach((box, idx) => {
      const h1 = box.querySelector('h1');
      const txt = h1.innerText;
      // console.log(txt);

      let tags = '';

      // 각 article 안쪽의 h1문자를 다시 반복돌면서 span으로 감싸줌
      for (const el of txt) {
        tags += `<span>${el}</span>`;
      }

      //생성된 태그구정 문자열을 h1요소에 삽입
      h1.innerHTML = tags;

      //h1안쪽의 span요소의 갯수만큼 반복을 돌면서 transitionDelay 값 설정
      const span = h1.querySelectorAll("span");

      span.forEach((el, idx) => {
        el.style.transitionDelay = 0.1 * idx + 's';
      });

    });

    btns.forEach((btn, idx) => {
      btn.addEventListener("click", e => {
        e.preventDefault();

        main.className = `bg${idx + 1}`;

        // ex2
        for (const el of btns) el.classList.remove("on");
        btns[idx].classList.add("on");

        for (const el of boxs) el.classList.remove('on');
        boxs[idx].classList.add("on");
      });
    });

  </script>
</body>

</html>